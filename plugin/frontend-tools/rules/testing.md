# 前端测试规范

## 测试框架

- 单元/组件测试：**Vitest** 或 **Jest**（按项目选择，在 README 或 CLAUDE.md 中注明）
- E2E：**Playwright** 或 **Cypress**（按项目选择）
- 测试代码位于 `src/**/__tests__/` 或根目录 `tests/`

## 测试分类

| 类型     | 说明                         |
| -------- | ---------------------------- |
| 单元测试 | 工具函数、纯逻辑、Hooks 行为 |
| 组件测试 | 组件渲染、交互、快照（慎用） |
| 集成测试 | 多模块协作、API mock         |
| E2E      | 关键用户路径、多页面流程     |

## 编写测试规范

- 用例命名清晰：`描述_场景_预期` 或 `it('should ... when ...')`
- 单测保持独立，不依赖执行顺序，不依赖全局状态
- 边界与异常：空数据、null/undefined、错误响应要有覆盖
- 组件测试：优先测行为与输出，避免过度依赖实现细节（如内部 state 结构）

## 构建与运行

```bash
# 安装依赖
pnpm install

# 运行单元/组件测试
pnpm test
# 或
pnpm test:unit

# 运行 E2E（若已配置）
pnpm test:e2e

# 覆盖率（若已配置）
pnpm test:coverage
```

## 提交前检查

- [ ] 新功能/修复有对应测试或更新已有用例
- [ ] 边界与异常路径有覆盖
- [ ] `pnpm test` 通过
- [ ] 关键流程有 E2E 或明确说明为何未覆盖
