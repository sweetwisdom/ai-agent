# ç¤ºä¾‹3ï¼šåˆ›å»ºå¸¦Pythonè„šæœ¬çš„æ•°æ®åˆ†æSkill

## åœºæ™¯æè¿°
ç”¨æˆ·æƒ³åˆ›å»ºä¸€ä¸ªæ•°æ®åˆ†æskillï¼Œéœ€è¦è¿›è¡Œå¤æ‚çš„æ•°æ®å¤„ç†å’Œç»Ÿè®¡è®¡ç®—ï¼Œå› æ­¤éœ€è¦Pythonè„šæœ¬æ”¯æŒã€‚

## ä½¿ç”¨è¿‡ç¨‹

### ç”¨æˆ·è¾“å…¥çš„éœ€æ±‚
```
éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªé¡¹ç›®ä»£ç ç»Ÿè®¡åˆ†æskill
åŠŸèƒ½ï¼š
- ç»Ÿè®¡é¡¹ç›®ä»£ç è¡Œæ•°
- åˆ†æç¼–ç¨‹è¯­è¨€åˆ†å¸ƒ
- è®¡ç®—ä»£ç å¤æ‚åº¦
- ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š
è¾“å…¥ï¼šé¡¹ç›®ç›®å½•è·¯å¾„
è¾“å‡ºï¼šè¯¦ç»†çš„ç»Ÿè®¡æŠ¥å‘Šï¼ˆMarkdownæ ¼å¼ï¼‰
å®ç°ï¼šéœ€è¦Pythonå¤„ç†å¤æ‚é€»è¾‘
```

### ç³»ç»Ÿå¼•å¯¼é—®é¢˜ä¸å›ç­”

**é—®é¢˜1ï¼šSkillåŸºæœ¬ä¿¡æ¯**
- Skillåç§°ï¼š`code-stats-analyzer`
- Skillæè¿°ï¼šé¡¹ç›®ä»£ç ç»Ÿè®¡åˆ†æå™¨ï¼Œæä¾›ä»£ç è¡Œæ•°ã€è¯­è¨€åˆ†å¸ƒã€å¤æ‚åº¦ç­‰è¯¦ç»†æŠ¥å‘Š
- ä¸»è¦ç”¨é€”ï¼šå¿«é€Ÿäº†è§£é¡¹ç›®è§„æ¨¡å’Œä»£ç ç»“æ„ç‰¹å¾

**é—®é¢˜2ï¼šåŠŸèƒ½è¯¦æƒ…**
- æ ¸å¿ƒåŠŸèƒ½ï¼š
  1. ç»Ÿè®¡å„ç±»æ–‡ä»¶çš„ä»£ç è¡Œæ•°
  2. åˆ†æç¼–ç¨‹è¯­è¨€ä½¿ç”¨æ¯”ä¾‹
  3. è¯†åˆ«æœ€å¤§/æœ€å¤æ‚çš„æ–‡ä»¶
  4. ç”ŸæˆMarkdownæ ¼å¼æŠ¥å‘Š
  5. æ’é™¤node_modulesã€.gitç­‰æ— å…³ç›®å½•
- è¾“å…¥è¦æ±‚ï¼š
  - é¡¹ç›®æ ¹ç›®å½•è·¯å¾„
  - å¯é€‰ï¼šè¦åˆ†æçš„æ–‡ä»¶æ‰©å±•å
- è¾“å‡ºæ ¼å¼ï¼šç»“æ„åŒ–çš„Markdownç»Ÿè®¡æŠ¥å‘Š

**é—®é¢˜3ï¼šå®ç°æ–¹å¼**
- âœ… Markdown + Pythonè„šæœ¬

**é—®é¢˜4ï¼šé™„åŠ é€‰é¡¹**
- âœ… éœ€è¦ç”¨æˆ·äº¤äº’ç¡®è®¤
- âœ… éœ€è¦ç¤ºä¾‹æ–‡ä»¶
- âŒ ä¸éœ€è¦é…ç½®æ–‡ä»¶
- âœ… éœ€è¦é”™è¯¯å¤„ç†

### ç³»ç»Ÿç”Ÿæˆçš„éœ€æ±‚ç¡®è®¤

```
ğŸ“‹ Skillåˆ›å»ºéœ€æ±‚ç¡®è®¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ Skillåç§°: code-stats-analyzer
ğŸ“ åŠŸèƒ½æè¿°: é¡¹ç›®ä»£ç ç»Ÿè®¡åˆ†æå™¨ï¼Œæä¾›ä»£ç è¡Œæ•°ã€è¯­è¨€åˆ†å¸ƒã€å¤æ‚åº¦ç­‰è¯¦ç»†æŠ¥å‘Š

ğŸ¯ æ ¸å¿ƒåŠŸèƒ½:
1. ç»Ÿè®¡å„ç±»æ–‡ä»¶çš„ä»£ç è¡Œæ•°
2. åˆ†æç¼–ç¨‹è¯­è¨€ä½¿ç”¨æ¯”ä¾‹
3. è¯†åˆ«æœ€å¤§/æœ€å¤æ‚çš„æ–‡ä»¶
4. ç”ŸæˆMarkdownæ ¼å¼æŠ¥å‘Š
5. æ’é™¤node_modulesã€.gitç­‰æ— å…³ç›®å½•

ğŸ“¥ è¾“å…¥è¦æ±‚:
- é¡¹ç›®æ ¹ç›®å½•è·¯å¾„
- å¯é€‰ï¼šè¦åˆ†æçš„æ–‡ä»¶æ‰©å±•å

ğŸ“¤ è¾“å‡ºæ ¼å¼:
ç»“æ„åŒ–çš„Markdownç»Ÿè®¡æŠ¥å‘Š

ğŸ› ï¸  å®ç°æ–¹å¼:
- ä¸»æ–‡ä»¶: skill.md
- è„šæœ¬: analyze.py
- é™„åŠ : ç¤ºä¾‹æ–‡ä»¶

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… ç¡®è®¤æ— è¯¯ï¼Œå¼€å§‹ç”Ÿæˆ
```

### ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„

```
code-stats-analyzer/
â”œâ”€â”€ skill.md              # æ ¸å¿ƒskillå®šä¹‰
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ analyze.py        # Pythonè„šæœ¬ï¼šä»£ç åˆ†æé€»è¾‘
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ example-output.md # ç¤ºä¾‹è¾“å‡ºæŠ¥å‘Š
â”‚   â””â”€â”€ usage.md          # ä½¿ç”¨ç¤ºä¾‹
â””â”€â”€ README.md             # ä½¿ç”¨æ–‡æ¡£
```

### ç”Ÿæˆçš„è„šæœ¬ç¤ºä¾‹

**analyze.py**:
```python
#!/usr/bin/env python3
"""
é¡¹ç›®ä»£ç ç»Ÿè®¡åˆ†æå™¨
åˆ†æé¡¹ç›®ä¸­çš„ä»£ç æ–‡ä»¶ï¼Œç”Ÿæˆç»Ÿè®¡æŠ¥å‘Š
"""

import os
import sys
from pathlib import Path
from collections import defaultdict
import argparse

# è¦æ’é™¤çš„ç›®å½•
EXCLUDE_DIRS = {
    'node_modules', '.git', '__pycache__', 'venv', '.venv',
    'dist', 'build', '.next', '.cache', 'coverage'
}

# è¯­è¨€åˆ°æ–‡ä»¶æ‰©å±•åçš„æ˜ å°„
LANGUAGE_MAP = {
    '.py': 'Python',
    '.js': 'JavaScript',
    '.ts': 'TypeScript',
    '.jsx': 'JavaScript (JSX)',
    '.tsx': 'TypeScript (TSX)',
    '.java': 'Java',
    '.cpp': 'C++',
    '.c': 'C',
    '.h': 'C/C++ Header',
    '.go': 'Go',
    '.rs': 'Rust',
    '.rb': 'Ruby',
    '.php': 'PHP',
    '.swift': 'Swift',
    '.kt': 'Kotlin',
    '.md': 'Markdown',
    '.html': 'HTML',
    '.css': 'CSS',
    '.scss': 'SCSS',
}

class CodeAnalyzer:
    def __init__(self, root_path):
        self.root_path = Path(root_path).resolve()
        self.stats = {
            'total_files': 0,
            'total_lines': 0,
            'language_stats': defaultdict(lambda: {'files': 0, 'lines': 0}),
            'largest_files': []
        }

    def should_exclude(self, path):
        """æ£€æŸ¥è·¯å¾„æ˜¯å¦åº”è¯¥è¢«æ’é™¤"""
        parts = path.parts
        return any(excluded in parts for excluded in EXCLUDE_DIRS)

    def count_lines(self, file_path):
        """è®¡ç®—æ–‡ä»¶è¡Œæ•°"""
        try:
            with open(file_path, 'r', encoding='utf-8', errors='ignore') as f:
                return sum(1 for line in f if line.strip())
        except Exception as e:
            print(f"è­¦å‘Š: æ— æ³•è¯»å–æ–‡ä»¶ {file_path}: {e}", file=sys.stderr)
            return 0

    def analyze(self):
        """æ‰§è¡Œåˆ†æ"""
        print(f"æ­£åœ¨åˆ†æé¡¹ç›®: {self.root_path}")

        for file_path in self.root_path.rglob('*'):
            # è·³è¿‡ç›®å½•å’Œæ’é™¤çš„è·¯å¾„
            if not file_path.is_file() or self.should_exclude(file_path):
                continue

            # è·å–æ–‡ä»¶æ‰©å±•å
            ext = file_path.suffix.lower()
            if ext not in LANGUAGE_MAP:
                continue

            # ç»Ÿè®¡è¡Œæ•°
            line_count = self.count_lines(file_path)
            if line_count == 0:
                continue

            # æ›´æ–°ç»Ÿè®¡
            language = LANGUAGE_MAP[ext]
            self.stats['total_files'] += 1
            self.stats['total_lines'] += line_count
            self.stats['language_stats'][language]['files'] += 1
            self.stats['language_stats'][language]['lines'] += line_count

            # è®°å½•å¤§æ–‡ä»¶
            relative_path = file_path.relative_to(self.root_path)
            self.stats['largest_files'].append({
                'path': str(relative_path),
                'lines': line_count,
                'language': language
            })

        # æ’åºæœ€å¤§æ–‡ä»¶
        self.stats['largest_files'].sort(key=lambda x: x['lines'], reverse=True)
        self.stats['largest_files'] = self.stats['largest_files'][:10]

    def generate_report(self):
        """ç”ŸæˆMarkdownæŠ¥å‘Š"""
        report = []
        report.append("# ğŸ“Š é¡¹ç›®ä»£ç ç»Ÿè®¡æŠ¥å‘Š\n")
        report.append(f"**é¡¹ç›®è·¯å¾„**: `{self.root_path}`\n")
        report.append("---\n")

        # æ€»è§ˆ
        report.append("## ğŸ“ˆ æ€»è§ˆ\n")
        report.append(f"- **æ€»æ–‡ä»¶æ•°**: {self.stats['total_files']}")
        report.append(f"- **æ€»ä»£ç è¡Œæ•°**: {self.stats['total_lines']:,}\n")

        # è¯­è¨€åˆ†å¸ƒ
        report.append("## ğŸŒ ç¼–ç¨‹è¯­è¨€åˆ†å¸ƒ\n")
        report.append("| è¯­è¨€ | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° | å æ¯” |")
        report.append("|------|--------|----------|------|")

        sorted_langs = sorted(
            self.stats['language_stats'].items(),
            key=lambda x: x[1]['lines'],
            reverse=True
        )

        for language, data in sorted_langs:
            percentage = (data['lines'] / self.stats['total_lines'] * 100) if self.stats['total_lines'] > 0 else 0
            report.append(
                f"| {language} | {data['files']} | {data['lines']:,} | {percentage:.1f}% |"
            )

        report.append("")

        # æœ€å¤§çš„æ–‡ä»¶
        report.append("## ğŸ“ ä»£ç è¡Œæ•°æœ€å¤šçš„æ–‡ä»¶ (Top 10)\n")
        report.append("| æ–‡ä»¶è·¯å¾„ | ä»£ç è¡Œæ•° | è¯­è¨€ |")
        report.append("|----------|----------|------|")

        for file_info in self.stats['largest_files']:
            report.append(
                f"| `{file_info['path']}` | {file_info['lines']:,} | {file_info['language']} |"
            )

        report.append("")
        report.append("---")
        report.append("*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: " +
                     __import__('datetime').datetime.now().strftime('%Y-%m-%d %H:%M:%S') + "*")

        return '\n'.join(report)

def main():
    parser = argparse.ArgumentParser(description='é¡¹ç›®ä»£ç ç»Ÿè®¡åˆ†æå™¨')
    parser.add_argument('path', help='é¡¹ç›®æ ¹ç›®å½•è·¯å¾„')
    parser.add_argument('-o', '--output', help='è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰')

    args = parser.parse_args()

    # éªŒè¯è·¯å¾„
    if not os.path.isdir(args.path):
        print(f"é”™è¯¯: è·¯å¾„ä¸å­˜åœ¨æˆ–ä¸æ˜¯ç›®å½•: {args.path}", file=sys.stderr)
        sys.exit(1)

    # æ‰§è¡Œåˆ†æ
    analyzer = CodeAnalyzer(args.path)
    analyzer.analyze()

    # ç”ŸæˆæŠ¥å‘Š
    report = analyzer.generate_report()

    # è¾“å‡ºæˆ–ä¿å­˜
    if args.output:
        with open(args.output, 'w', encoding='utf-8') as f:
            f.write(report)
        print(f"âœ… æŠ¥å‘Šå·²ä¿å­˜åˆ°: {args.output}")
    else:
        print(report)

if __name__ == "__main__":
    main()
```

## å…³é”®è¦ç‚¹

1. **Pythoné€‚ç”¨åœºæ™¯**ï¼š
   - éœ€è¦å¤æ‚æ•°æ®å¤„ç†
   - éœ€è¦æ–‡ä»¶ç³»ç»Ÿéå†
   - éœ€è¦ç»Ÿè®¡å’Œè®¡ç®—
   - éœ€è¦ç”Ÿæˆæ ¼å¼åŒ–è¾“å‡º

2. **è„šæœ¬è®¾è®¡åŸåˆ™**ï¼š
   - ä½¿ç”¨ç±»ç»„ç»‡ä»£ç é€»è¾‘
   - å®Œå–„çš„é”™è¯¯å¤„ç†
   - æ¸…æ™°çš„è¿›åº¦åé¦ˆ
   - æ”¯æŒå‘½ä»¤è¡Œå‚æ•°
   - è¾“å‡ºæ ¼å¼åŒ–çš„ç»“æœ

3. **skill.mdä¸è„šæœ¬äº¤äº’**ï¼š
```markdown
### æ‰§è¡Œæ­¥éª¤
1. è¯¢é—®ç”¨æˆ·é¡¹ç›®è·¯å¾„
2. ç¡®è®¤è¦åˆ†æçš„å†…å®¹
3. è°ƒç”¨Pythonè„šæœ¬: `python scripts/analyze.py [path] -o report.md`
4. è¯»å–ç”Ÿæˆçš„æŠ¥å‘Š
5. å‘ç”¨æˆ·å±•ç¤ºåˆ†æç»“æœ
6. æä¾›ä¼˜åŒ–å»ºè®®
```

4. **ä¾èµ–ç®¡ç†**ï¼š
   - ä½¿ç”¨Pythonæ ‡å‡†åº“ï¼ˆé¿å…å¤–éƒ¨ä¾èµ–ï¼‰
   - å¦‚éœ€ç¬¬ä¸‰æ–¹åº“ï¼Œåœ¨READMEä¸­è¯´æ˜å®‰è£…æ–¹æ³•

## é¢„æœŸæ•ˆæœ

ç”Ÿæˆçš„skillå¯ä»¥ï¼š
1. æ¥æ”¶ç”¨æˆ·è¾“å…¥çš„é¡¹ç›®è·¯å¾„
2. æ‰§è¡ŒPythonè„šæœ¬è¿›è¡Œæ·±åº¦åˆ†æ
3. ç”Ÿæˆä¸“ä¸šçš„ç»Ÿè®¡æŠ¥å‘Š
4. æä¾›åŸºäºæ•°æ®çš„æ”¹è¿›å»ºè®®
5. å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯

## ä½¿ç”¨ç¤ºä¾‹

```bash
# åˆ†æå½“å‰é¡¹ç›®
python scripts/analyze.py . -o stats.md

# åˆ†ææŒ‡å®šé¡¹ç›®
python scripts/analyze.py /path/to/project
```

## è¾“å‡ºç¤ºä¾‹

```markdown
# ğŸ“Š é¡¹ç›®ä»£ç ç»Ÿè®¡æŠ¥å‘Š

**é¡¹ç›®è·¯å¾„**: `/home/user/my-project`

---

## ğŸ“ˆ æ€»è§ˆ

- **æ€»æ–‡ä»¶æ•°**: 156
- **æ€»ä»£ç è¡Œæ•°**: 23,458

## ğŸŒ ç¼–ç¨‹è¯­è¨€åˆ†å¸ƒ

| è¯­è¨€ | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° | å æ¯” |
|------|--------|----------|------|
| TypeScript | 89 | 15,234 | 64.9% |
| JavaScript | 32 | 4,567 | 19.5% |
| CSS | 18 | 2,345 | 10.0% |
| Python | 12 | 987 | 4.2% |
| Markdown | 5 | 325 | 1.4% |

## ğŸ“ ä»£ç è¡Œæ•°æœ€å¤šçš„æ–‡ä»¶ (Top 10)

| æ–‡ä»¶è·¯å¾„ | ä»£ç è¡Œæ•° | è¯­è¨€ |
|----------|----------|------|
| `src/components/Dashboard.tsx` | 1,234 | TypeScript |
| `src/utils/dataProcessor.ts` | 987 | TypeScript |
...
```
